# TODO

## 2021.06.21

* 一度取得したRSSやXMLは再取得しない。キャッシュの仕組みを作る。
* Googleアラートを使った汎用的なクローラーを作成する
* 定型文を定期的にツイートする仕組みを作る
    * 呟怖のトレンドにも使える
    * ローリングストックのアナウンスにも使える
* 気象庁関連のクローラーの実装
    * ~~地震~~
    * 注意報・警報（大雨危険度通知）
* コンテナは以下のように分けておけばよいか
    * bot
    * mysql
    * web ... 今後作る予定があれば

## 2021.06.26

### 列車運行情報の見直し

* 現在の鉄道コムRSSを使ったツイートは利用規約に違反しているので、変更する。
    * [利用規約](https://aiasahi.jp/term/)

* 課題
    * 鉄道コムRSSを使って鉄道会社HPのURLを収集し、マスタ化する。
    * ページの内容から「遅延」を検知するのが難しい。
        * 鉄道会社によってサイトの構造が異なるため、処理を定型化するのが難しい。
        * 正規表現などを使って遅延を意味するキーワードを抽出する。
        * 「どの路線」まで突き止めるのは難しいかもしれない。
    * 鉄道会社のTwitterアカウントがあるのでそれを使う。
        * 遅延情報がツイートされているので、リツイートする
        * 鉄道会社を「リスト」に追加しておく。
        * リストを時間範囲して検索し、取得できた遅延情報をリツイートすることができないか？ https://applimura.com/twitter-list-search/
* TODO
    * まずは鉄道コムRSSを使って、URLのマスタ化から着手する。

## Docker対応 - 2021.06.29

```
docker build . -t spus16_bot

docker run -it --name=spus_tbkw --env-file=spus16_tbkw.env spus16_bot:0.1.0 python /usr/src/app/bot_favorite.py
docker start spus_tbkw

docker run -it --name=spus_traffic --env-file=spus16_traffic.env spus16_bot:0.1.0 python /usr/src/app/bot_retweet.py
docker start spus_traffic
```

## 設計を考え直す - 2021.06.30

* 情報取得元は Twitter と RSS に限定する。
* Twitter
    * リツイートのメリットは「発信元が明確」であり「著作権も侵害しない」、「発信元が削除されれれば、リツイートも消える」メリットがある。
    * 列車運行情報
        * ほとんどの鉄道会社はTwitterを使って運行情報を発信している。
        * サポアスではその発信情報をリツイートする。
        * 鉄道会社のTwitterアカウントは「リスト」で管理する。
    * 地震
        * tenki.jp地震情報をリツイートする。
* RSS
    * 気象庁防災情報XML
        * 気象庁にもTwitterアカウントはあるが、広告やお知らせなど、関係のないコンテンツも流れてくるので使わない。
        * RSS+XMLで地震や気象警報に関する詳細な情報が取得できる。
    * Googleアラートを使った配信
        * スピード感はかなり遅いが、TwitterやRSS配信を行っていないコンテンツには有効。 

